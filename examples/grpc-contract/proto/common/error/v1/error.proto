syntax = "proto3";

package common.error.v1;

import "buf/validate/validate.proto";

// **Description**: Represents a standardized error response for gRPC services, following the Problem Details for HTTP APIs specification (RFC 9457).
//
// See: [RFC-9457](https://datatracker.ietf.org/doc/rfc9457) for details.
//
// <details>
// <summary>Example: <i>(Click to expand)</i></summary>
// ```json
// {
//   "type": "https://example.com/problems/invalid-input",
//   "status": 404,
//   "title": "Skill Not Found",
//   "detail": "Some of the provided skills do not exist in the system.",
//   "instance": "employee.designation.v1.DesignationService/CreateDesignation",
//   "id": "Employee.Skill.NotFound"
// }
// ```
// </details>
message ProblemDetail {
  // **Description**: An absolute and resolvable URI that identifies the problem type. This URI should point to a human-readable documentation that describes the problem type.
  //
  // **Examples**:
  //
  // - `https://example.com/problems/invalid-input`
  // - `https://example.com/problems/resource-not-found`
  string type = 1 [(buf.validate.field) = {required: true}];
  // **Description**: Indicates the HTTP status code generated by the API service for this occurrence of the problem. This field is advisory and should comply with the standard Problem Detail object.
  //
  // **Examples**:
  //
  // - `404` (Not Found)
  // - `500` (Internal Server Error)
  int32 status = 2 [(buf.validate.field) = {
    required: true
    int32: {
      gte: 400
      lt: 600
    }
  }];
  // **Description**: A short, human-readable summary of the problem type that MUST NOT change from occurrence to occurrence.
  //
  // **Examples**:
  //
  // - `Invalid Input`
  // - `Resource Not Found`
  // - `Internal Server Error`
  string title = 3 [(buf.validate.field) = {
    required: true
    string: {min_len: 1}
  }];
  // **Description**: A human-readable explanation specific to this occurrence of the problem.
  //
  // **Examples**:
  //
  // - `The provided user ID does not exist in the system.`
  // - `The requested resource could not be found.`
  optional string detail = 4 [(buf.validate.field) = {
    required: false
    string: {min_len: 1}
  }];
  // **Description**: A fully qualified URI of RPC method that identifies the specific occurrence of the problem.
  //
  // **Examples**:
  //
  // - `employee.designation.v1.DesignationService/CreateDesignation`
  // - `employee.skill.v1.SkillService/GetSkill`
  string instance = 5 [(buf.validate.field) = {
    required: true
    string: {min_len: 1}
  }];
  // **Description**: Business-level (namespaced) error ID that enables clients to build error-specific logic
  // without relying on parsing messages as well as support localization.
  //
  // **Examples**:
  //
  // - `Employee.Skill.NotFound`
  // - `Employee.Designation.Conflict`
  string id = 6 [(buf.validate.field) = {
    required: true
    string: {min_len: 1}
  }];
}
